import { randRange } from "../common.js";
import { saveUserSettings } from "../saveAndLoad.js";

export const UI_MODE_SOIL = "soil";
export const UI_MODE_ROCK = "rock";
export const UI_BB_MODE = "UI_BB_MODE";

export const UI_CANVAS_VIEWPORT_CENTER_Y = "UI_CANVAS_VIEWPORT_CENTER_Y";
export const UI_CANVAS_VIEWPORT_CENTER_X = "UI_CANVAS_VIEWPORT_CENTER_X";
export const UI_CANVAS_VIEWPORT_CENTER_Z = "UI_CANVAS_VIEWPORT_CENTER_Z";
export const UI_CANVAS_VIEWPORT_FRAC_Y = "UI_CANVAS_VIEWPORT_FRAC_Y";
export const UI_CANVAS_VIEWPORT_FRAC_X = "UI_CANVAS_VIEWPORT_FRAC_X";
export const UI_CANVAS_SQUARES_ZOOM = "UI_CANVAS_SQUARES_ZOOM";
export const UI_STARMAP_ZOOM = "UI_STARMAP_ZOOM";
export const UI_STARMAP_PREV_ZOOM = "UI_STARMAP_PREV_ZOOM";
export const UI_STARMAP_NORMAL_BRIGTNESS = "UI_STARMAP_NORMAL_BRIGTNESS";
export const UI_STARMAP_CONSTELATION_BRIGHTNESS = "UI_STARMAP_CONSTELATION_BRIGHTNESS";
export const UI_STARMAP_SHOW_CONSTELLATION_NAMES = "UI_STARMAP_SHOW_CONSTELLATION_NAMES";
export const UI_STARMAP_STAR_MAX_SIZE = "UI_STARMAP_STAR_MAX_SIZE";
export const UI_STARMAP_STAR_SIZE_FACTOR = "UI_STARMAP_STAR_SIZE_FACTOR";
export const UI_STARMAP_STAR_OPACITY_FACTOR = "UI_STARMAP_STAR_OPACITY_FACTOR";
export const UI_STARMAP_MAX_BRIGHTNESS = "UI_STARMAP_MAX_BRIGHTNESS";
export const UI_STARMAP_BRIGHTNESS_SHIFT = "UI_STARMAP_BRIGHTNESS_SHIFT";
export const UI_STARMAP_STAR_OPACITY_SHIFT = "UI_STARMAP_STAR_OPACITY_SHIFT";
export const UI_STARMAP_STAR_MIN_MAGNITUDE = "UI_STARMAP_STAR_MIN_MAGNITUDE";
export const UI_STARMAP_STAR_CONTROL_TOGGLE_MODE = "UI_STARMAP_STAR_CONTROL_TOGGLE_MODE";

export const UI_CAMERA_FOV = "UI_CAMERA_FOV";
export const UI_CAMERA_OFFSET_VEC = "UI_CAMERA_OFFSET_VEC";
export const UI_CAMERA_OFFSET_VEC_DT = "UI_CAMERA_OFFSET_VEC_DT";
export const UI_CAMERA_ROTATION_VEC = "UI_CAMERA_ROTATION_VEC";
export const UI_CAMERA_ROTATION_VEC_DT = "UI_CAMERA_ROTATION_VEC_DT";
export const UI_STARMAP_ROTATION_VEC = "UI_STARMAP_ROTATION_VEC";
export const UI_STARMAP_ROTATION_VEC_DT = "UI_STARMAP_ROTATION_VEC_DT";

export const UI_TEXTEDIT_ACTIVE = "UI_TEXTEDIT_ACTIVE";

export const UI_GODMODE_STRENGTH = "UI_GODMODE_STRENGTH";

export const UI_NULL = "UI_NULL";
export const UI_UI_SIZE = "UI_UI_SIZE";
export const UI_UI_NEXTWORLD = "UI_UI_NEXTWORLD";
export const UI_UI_CURWORLD = "UI_UI_CURWORLD";
export const UI_UI_LASTSAVED = "UI_UI_LASTSAVED";

export const UI_UI_WORLDHIDDEN = "UI_UI_WORLDHIDDEN";
export const UI_UI_WORLDDELETED = "UI_UI_WORLDDELETED";
export const UI_UI_WORLDNAME = "UI_UI_WORLDNAME";

export const UI_CENTER = "UI_CENTER"

export const UI_SOIL_COMPOSITION = "UI_SOIL_COMPOSITION";
export const UI_ROCK_COMPOSITION = "UI_ROCK_COMPOSITION";
export const UI_SOIL_VIEWMODE = "UI_SOIL_VIEWMODE";
export const UI_SOIL_INITALWATER = "UI_SOIL_INITALWATER";

export const UI_SM_BB = "UI_SM_BB";
export const UI_SM_LIGHTING = "UI_SM_LIGHTING";
export const UI_PALETTE_PLANTS = "UI_PALETTE_PLANTS";
export const UI_SM_GODMODE = "UI_SM_GODMODE";
export const UI_SM_CLIMATE = "UI_SM_CLIMATE";

export const UI_CLIPS = "UI_CLIPS";
export const UI_CLIPS_PAGE = "UI_CLIPS_PAGE";
export const UI_CLIPS_DENSITY = "UI_CLIPS_DENSITY";

export const UI_MAIN_NEWWORLD = "UI_MAIN_NEWWORLD";
export const UI_MAIN_NEWWORLD_TYPE_SELECT = "UI_MAIN_NEWWORLD_TYPE_SELECT";
export const UI_MAIN_NEWWORLD_TYPE_PLANTS = "UI_MAIN_NEWWORLD_TYPE_PLANTS";
export const UI_MAIN_NEWWORLD_TYPE_BLOCKS = "UI_MAIN_NEWWORLD_TYPE_BLOCKS";
export const UI_MAIN_NEWWORLD_TYPE_CLOUDS = "UI_MAIN_NEWWORLD_TYPE_CLOUDS";
export const UI_MAIN_NEWWORLD_CUSTOM = "UI_MAIN_NEWWORLD_CUSTOM";
export const UI_MAIN_NEWWORLD_NAME = "UI_MAIN_NEWWORLD_NAME";
export const UI_MAIN_NEWWORLD_SIMHEIGHT = "UI_MAIN_NEWWORLD_SIMHEIGHT";
export const UI_MAIN_NEWWORLD_LATITUDE = "UI_MAIN_NEWWORLD_LATITUDE";
export const UI_MAIN_NEWWORLD_LONGITUDE = "UI_MAIN_NEWWORLD_LONGITUDE";

export const UI_UI_WORLDPAGE = "UI_UI_WORLDPAGE";
export const UI_UI_SHOWHIDDEN = "UI_UI_SHOWHIDDEN";

export const UI_GAME_MAX_CANVAS_SQUARES_X = "UI_GAME_MAX_CANVAS_SQUARES_X";
export const UI_GAME_MAX_CANVAS_SQUARES_Y = "UI_GAME_MAX_CANVAS_SQUARES_Y";

export const UI_CAMERA_EXPOSURE = "UI_CAMERA_EXPOSURE";

export const UI_LIGHTING_GLOBAL = "UI_LIGHTING_GLOBAL";
export const UI_LIGHTING_DISABLED_BRIGHTNESS = "UI_LIGHTING_DISABLED_BRIGHTNESS";
export const UI_LIGHTING_SUN = "UI_LIGHTING_SUN";
export const UI_LIGHTING_MOON = "UI_LIGHTING_MOON";
export const UI_LIGHTING_WATER = "UI_LIGHTING_WATER";
export const UI_LIGHTING_ROCK = "UI_LIGHTING_ROCK";
export const UI_LIGHTING_PLANT = "UI_LIGHTING_PLANT";
export const UI_LIGHTING_PLANT_TREE = "UI_LIGHTING_PLANT_TREE";
export const UI_LIGHTING_PLANT_GRASS = "UI_LIGHTING_PLANT_GRASS";
export const UI_LIGHTING_DECAY = "UI_LIGHTING_DECAY";
export const UI_LIGHTING_SURFACE = "UI_LIGHTING_SURFACE";
export const UI_LIGHTING_WATER_OPACITY = "UI_LIGHTING_WATER_OPACITY";
export const UI_LIGHTING_WATER_SATURATION = "UI_LIGHTING_WATER_SATURATION";
export const UI_LIGHTING_WATER_VALUE = "UI_LIGHTING_WATER_VALUE";
export const UI_LIGHTING_WATER_HUE = "UI_LIGHTING_WATER_HUE";
export const UI_LIGHTING_SHADOW_SOFTNESS = "UI_LIGHTING_SHADOW_SOFTNESS";
export const UI_LIGHTING_PLANTLIGHTINGOFFSET = "UI_LIGHTING_PLANTLIGHTINGOFFSET";


export const UI_ORGANISM_TYPE_SELECT = "UI_ORGANISM_TYPE_SELECT";
export const UI_ORGANISM_TYPE_MOSS = "UI_ORGANISM_TYPE_MOSS";
export const UI_ORGANISM_TYPE_GRASS = "UI_ORGANISM_TYPE_GRASS";
export const UI_ORGANISM_TYPE_FLOWER = "UI_ORGANISM_TYPE_FLOWER";
export const UI_ORGANISM_TYPE_TREE = "UI_ORGANISM_TYPE_TREE";

export const UI_ORGANISM_SELECT = "UI_ORGANISM_SELECT";

export const UI_ORGANISM_GRASS_WHEAT = "UI_ORGANISM_GRASS_WHEAT";
export const UI_ORGANISM_GRASS_KBLUE = "UI_ORGANISM_GRASS_KBLUE";
export const UI_ORGANISM_GRASS_CATTAIL = "UI_ORGANISM_GRASS_CATTAIL"

export const UI_ORGANISM_TREE_PALM = "UI_ORGANISM_TREE_PALM"
export const UI_ORGANISM_TREE_MAGNOLIA = "UI_ORGANISM_TREE_MAGNOLIA"

export const UI_ORGANISM_FLOWER_CONEFLOWER = "UI_ORGANISM_FLOWER_CONEFLOWER";

export const UI_ORGANISM_MOSS_PLEUROCARP = "UI_ORGANISM_MOSS_PLEUROCARP";

export const UI_ORGANISM_CONFIGURATOR = "UI_ORGANISM_CONFIGURATOR";
export const UI_ORGANISM_NUTRITION_CONFIGURATOR = "UI_ORGANISM_NUTRITION_CONFIGURATOR"
export const UI_ORGANISM_NUTRITION_CONFIGURATOR_DATA = "UI_ORGANISM_NUTRITION_CONFIGURATOR_DATA"

export const UI_VIEWMODE_SELECT = "UI_VIEWMODE_SELECT";

export const UI_VIEWMODE_NORMAL = "UI_VIEWMODE_NORMAL";
export const UI_VIEWMODE_3D = "UI_VIEWMODE_3D";
export const UI_VIEWMODE_LIGHTING = "UI_VIEWMODE_LIGHTING";
export const UI_VIEWMODE_NUTRIENTS = "UI_VIEWMODE_NUTRIENTS";

export const UI_VIEWMODE_NITROGEN = "UI_VIEWMODE_NITROGEN";
export const UI_VIEWMODE_PHOSPHORUS = "UI_VIEWMODE_PHOSPHORUS";
export const UI_VIEWMODE_WIND = "UI_VIEWMODE_WIND";
export const UI_VIEWMODE_TEMPERATURE = "UI_VIEWMODE_TEMPERATURE";
export const UI_VIEWMODE_MOISTURE = "UI_VIEWMODE_MOISTURE";
export const UI_VIEWMODE_WATERTICKRATE = "UI_VIEWMODE_WATERTICKRATE";
export const UI_VIEWMODE_WATERMATRIC = "UI_VIEWMODE_WATERMATRIC";
export const UI_VIEWMODE_SURFACE = "UI_VIEWMODE_SURFACE";
export const UI_VIEWMODE_ORGANISMS = "UI_VIEWMODE_ORGANISMS";
export const UI_VIEWMODE_GROUP = "UI_VIEWMODE_GROUP";
export const UI_VIEWMODE_AIRTICKRATE = "UI_VIEWMODE_AIRTICKRATE";
export const UI_VIEWMODE_EVOLUTION = "UI_VIEWMODE_EVOLUTION";
export const UI_VIEWMODE_DEV1 = "UI_VIEWMODE_DEV1";
export const UI_VIEWMODE_DEV2 = "UI_VIEWMODE_DEV2";
export const UI_VIEWMODE_DEV3 = "UI_VIEWMODE_DEV3";
export const UI_VIEWMODE_DEV4 = "UI_VIEWMODE_DEV4";
export const UI_VIEWMODE_DEV5 = "UI_VIEWMODE_DEV5";
export const UI_VIEWMODE_DEV6 = "UI_VIEWMODE_DEV6";

export const UI_TOPBAR = "UI_TOPBAR";
export const UI_TOOL_MODE_LEFT = "UI_TOOL_MODE_LEFT";
export const UI_TOOL_MODE_RIGHT = "UI_TOO_MODE_RIGHT";

export const UI_GODMODE_SELECT = "UI_GODMODE_SELECT";
export const UI_GODMODE_WIND = "wind";
export const UI_GODMODE_TEMPERATURE = "temperature";
export const UI_GODMODE_MOISTURE = "moisture";
export const UI_GODMODE_KILL = "kill";
export const UI_GODMODE_FASTPLANT = "UI_GODMODE_FASTPLANT";

export const UI_PALETTE_CLIPS = "UI_PALETTE_CLIPS";
export const UI_PALETTE_CLIPS_WAYPOINT_SELECT = "UI_PALETTE_CLIPS_WAYPOINT_SELECT";
export const UI_PALETTE_CLIPS_WAYPOINT_DATAMAP = "UI_PALETTE_CLIPS_WAYPOINT_DATAMAP";
export const UI_PALETTE_CLIPS_WAYPOINT_NAME = "UI_PALETTE_CLIPS_WAYPOINT_NAME";
export const UI_PALETTE_CLIPS_WAYPOINT_SRC = "UI_PALETTE_CLIPS_WAYPOINT_SRC";
export const UI_PALETTE_CLIPS_WAYPOINT_DST = "UI_PALETTE_CLIPS_WAYPOINT_DST";

export const UI_CLIMATE_SELECT_MENU = "UI_CLIMATE_SELECT_MENU";
export const UI_CLIMATE_SELECT_CLOUDS = "UI_CLIMATE_SELECT_CLOUDS";

export const UI_CLIMATE_SELECT = "UI_CLIMATE_SELECT";
export const UI_CLIMATE_MIDWEST = "UI_CLIMATE_MIDWEST";
export const UI_CLIMATE_DESERT = "UI_CLIMATE_DESERT";
export const UI_CLIMATE_FANTASY = "UI_CLIMATE_FANTASY";

export const UI_CLIMATE_WEATHER_ACTIVE = "UI_CLIMATE_WEATHER_ACTIVE";
export const UI_CLIMATE_WEATHER_CLEAR = "clear";
export const UI_CLIMATE_WEATHER_PARTLY_CLOUDY = "partly cloudy";
export const UI_CLIMATE_WEATHER_MOSTLY_CLOUDY = "mostly cloudy";
export const UI_CLIMATE_WEATHER_FOGGY = "foggy";
export const UI_CLIMATE_WEATHER_LIGHTRAIN = "light rain";
export const UI_CLIMATE_WEATHER_HEAVYRAIN = "heavy rain";
export const UI_CLIMATE_WEATHER_NULL = "null weather";
export const UI_CLIMATE_RAINFALL_DENSITY = "UI_CLIMATE_RAINFALL_DENSITY"; 

export const UI_CLIMATE_WEATHER_DURATION = "UI_CLIMATE_WEATHER_DURATION";

export const UI_CLIMATE_WEATHER_TOOL_STRENGTH = "UI_CLIMATE_WEATHER_TOOL_STRENGTH";
export const UI_CLIMATE_TOOL_SIZE = "UI_CLIMATE_TOOL_SIZE";
export const UI_CLIMATE_WEATHER_TOOL_SELECT = "UI_CLIMATE_WEATHER_TOOL_SELECT";
export const UI_CLIMATE_WEATHER_TOOL_DRYAIR = "dry air";
export const UI_CLIMATE_WEATHER_TOOL_MATCHEDAIR = "matched air";
export const UI_CLIMATE_WEATHER_TOOL_CLOUD = "cloud";
export const UI_CLIMATE_WEATHER_TOOL_CLOUD_HUMIDITY = "UI_CLIMATE_WEATHER_TOOL_CLOUD_HUMIDITY";
export const UI_CLIMATE_WEATHER_RAIN_TOGGLE = "UI_CLIMATE_WEATHER_RAIN_TOGGLE";

export const UI_TOPBAR_MAINMENU = "UI_TOPBAR_MAINMENU"; 
export const UI_TOPBAR_BLOCK = "UI_TOPBAR_BLOCK";
export const UI_TOPBAR_LIGHTING = "UI_TOPBAR_LIGHTING";
export const UI_TOPBAR_VIEWMODE = "UI_TOPBAR_VIEWMODE";
export const UI_TOPBAR_SIMULATION = "UI_TOPBAR_SIMULATION";
export const UI_TOPBAR_TIME = "UI_TOPBAR_TIME";
export const UI_TOPBAR_WEATHER = "UI_TOPBAR_WEATHER";
export const UI_TOPBAR_STARGAZER = "UI_TOPBAR_STARGAZER"
export const UI_WORLDPAN = "UI_WORLDPAN";

export const UI_NAME = "UI_NAME";

export const UI_SPEED = "UI_SPEED";
export const UI_SPEED_0 = "UI_SPEED_0";
export const UI_SPEED_1 = "UI_SPEED_1";
export const UI_SPEED_2 = "UI_SPEED_2";
export const UI_SPEED_3 = "UI_SPEED_3";
export const UI_SPEED_4 = "UI_SPEED_4";
export const UI_SPEED_5 = "UI_SPEED_5";
export const UI_SPEED_6 = "UI_SPEED_6";
export const UI_SPEED_7 = "UI_SPEED_7";
export const UI_SPEED_8 = "UI_SPEED_8";
export const UI_SPEED_9 = "UI_SPEED_9";
export const UI_SPEED_10 = "UI_SPEED_10";
export const UI_SPEED_11 = "UI_SPEED_11";
export const UI_SPEED_12 = "UI_SPEED_12";
export const UI_SPEED_13 = "UI_SPEED_13";
export const UI_SPEED_14 = "UI_SPEED_14";
export const UI_SPEED_15 = "UI_SPEED_15";
export const UI_SPEED_16 = "UI_SPEED_16";
export const UI_SPEED_17 = "UI_SPEED_17";
export const UI_SPEED_18 = "UI_SPEED_18";
export const UI_SPEED_19 = "UI_SPEED_19";

export const UI_SPEEDS = [UI_SPEED, UI_SPEED_0, UI_SPEED_1, UI_SPEED_2, UI_SPEED_3, UI_SPEED_4, UI_SPEED_5, UI_SPEED_6, UI_SPEED_7, UI_SPEED_8, UI_SPEED_9, UI_SPEED_10, UI_SPEED_11]; //, UI_SPEED_12]; //,UI_SPEED_13, UI_SPEED_14, UI_SPEED_15, UI_SPEED_16, UI_SPEED_17, UI_SPEED_18, UI_SPEED_19 ]
export const UI_BOOLEAN = "UI_BOOLEAN";

export const UI_LIGHTING_ENABLED = "UI_LIGHTING_ENABLED";
export const UI_LIGHTING_UPDATERATE = "UI_LIGHTING_UPDATERATE";
export const UI_LIGHTING_QUALITY = "UI_LIGHTING_QUALITY";


export const UI_LIGHTING_SCENE_MODE = "UI_LIGHTING_SCENE_MODE";
export const UI_LIGHTING_SCENE_MODE_BRIGHTNESS = "UI_LIGHTING_SCENE_MODE_BRIGHTNESS";
export const UI_LIGHTING_SCENE_MODE_DECAY = "UI_LIGHTING_SCENE_MODE_DECAY";
export const UI_LIGHTING_SCENE_MODE_WATER = "UI_LIGHTING_SCENE_MODE_WATER";
export const UI_LIGHTING_SCENE_MODE_PLANT = "UI_LIGHTING_SCENE_MODE_PLANT";

export const UI_LIGHTING_FLATLIGHTING_BRIGHTNESS = "UI_LIGHTING_FLATLIGHTING_BRIGHTNESS";
export const UI_LIGHTING_FLATLIGHTING_HUE = "UI_LIGHTING_FLATLIGHTING_HUE";
export const UI_LIGHTING_FLATLIGHTING_SATURATION = "UI_LIGHTING_FLATLIGHTING_SATURATION";

export const UI_SIMULATION_SIMPLESQUARE = "UI_SIMULATION_SIMPLESQUARE";
export const UI_SIMULATION_CLOUDS = "UI_SIMULATION_CLOUDS";
export const UI_SIMULATION_GENS_PER_DAY = "UI_SIMULATION_GENS_PER_DAY";
export const UI_SIMULATION_HEIGHT = "UI_SIMULATION_HEIGHT";

export const UI_PALETTE_BLOCKS = "UI_PALETTE_BLOCKS";
export const UI_PALETTE_SOILIDX = "UI_PALETTE_SOILIDX";
export const UI_PALETTE_ROCKIDX = "UI_PALETTE_ROCKIDX";

export const UI_PALETTE_MODE = "UI_PALETTE_MODE";
export const UI_PALETTE_MODE_SOIL = "UI_PALETTE_MODE_SOIL";
export const UI_PALETTE_MODE_ROCK = "UI_PALETTE_MODE_ROCK";
export const UI_PALLETE_MODE_SPECIAL = "UI_PALLETE_MODE_SPECIAL";
export const UI_PALLETE_MODE_PASTE = "UI_PALLETE_MODE_PASTE";

export const UI_PALETTE_PASTE_MODE = "UI_PALETTE_PASTE_MODE";
export const UI_PALETTE_PASTE_MODE_FG = "UI_PALETTE_PASTE_MODE_FG";
export const UI_PALETTE_PASTE_MODE_BG = "UI_PALETTE_PASTE_MODE_BG";

export const UI_PALETTE_PHYSICS = "UI_PALETTE_PHYSICS";
export const UI_PALETTE_PHYSICS_STATIC = "UI_PALETTE_PHYSICS_STATIC";
export const UI_PALETTE_PHYSICS_RIGID = "UI_PALETTE_PHYSICS_RIGID";
export const UI_PALETTE_PHYSICS_SAND = "UI_PALETTE_PHYSICS_SAND";

export const UI_PALETTE_COMPOSITION =  "UI_PALETTE_COMPOSITION"
export const UI_PALETTE_VARIANCE =  "UI_PALETTE_VARIANCE"
export const UI_PALETTE_SHOWPICKER = "UI_PALETTE_SHOWPICKER";

export const UI_PALETTE_SIZE = "UI_PALETTE_SIZE";
export const UI_PALETTE_STRENGTH = "UI_PALETTE_STRENGTH";

export const UI_PALETTE_SELECT = "UI_PALETTE_SELECT";
export const UI_PALETTE_SOILROCK = "UI_PALETTE_SOILROCK";
export const UI_PALETTE_WATER = "UI_PALETTE_WATER";
export const UI_PALETTE_AQUIFER = "UI_PALETTE_AQUIFER";
export const UI_PALETTE_SURFACE = "UI_PALETTE_SURFACE";
export const UI_PALETTE_SURFACE_OFF = "UI_PALETTE_SURFACE_OFF";
export const UI_PALETTE_SURFACE_MATCH = "UI_PALETTE_SURFACE_MATCH";
export const UI_PALETTE_ERASE = "UI_PALETTE_ERASE";
export const UI_PALETTE_EYEDROPPER = "UI_PALETTE_EYEDROPPER";
export const UI_PALETTE_MIXER = "UI_PALETTE_MIXER";

export const UI_PALETTE_AQUIFER_FLOWRATE = "UI_PALETTE_AQUIFER_FLOWRATE";
export const UI_PALETTE_SPECIAL_SHOWINDICATOR = "UI_PALETTE_SPECIAL_SHOWINDICATOR";

export const UI_PALETTE_SPECIAL_CHURN = "UI_PALETTE_SPECIAL_CHURN";
export const UI_PALETTE_SPECIAL_CHURN_WIDE = "UI_PALETTE_SPECIAL_CHURN_WIDE";
export const UI_PALETTE_SPECIAL_CHURN_STRENGTH = "UI_PALETTE_SPECIAL_CHURN_STRENGTH";

export const UI_DEBUG_CLIMATE_WEATHER_FOREVER = "UI_DEBUG_CLIMATE_WEATHER_FOREVER";

export const UI_UI_PHONEMODE = "UI_UI_PHONEMODE";

export const UI_PLANT_CONEFLOWER_HUESHIFT = "UI_PLANT_CONEFLOWER_HUESHIFT";
export const UI_PLANT_CONEFLOWER_PEDALANGLESHIFT = "UI_PLANT_CONEFLOWER_PEDALANGLESHIFT";

export const UI_LIGHTING_CLOUDCOVER_OPACITY = "UI_LIGHTING_CLOUDCOVER_OPACITY";

export function isEyedropperOrMixerClicked() {
    return [UI_PALETTE_EYEDROPPER, UI_PALETTE_MIXER].indexOf(loadGD(UI_PALETTE_SELECT)) >= 0;
}

export const UI_REGEX = {
    UI_MAIN_NEWWORLD_NAME: ".{0,20}",
    UI_MAIN_NEWWORLD_LATITUDE: "^(-?(90(\\.0{0,2})?|[0-8]?\\d?(\\.\\d{0,2})?))?$",
    UI_MAIN_NEWWORLD_LONGITUDE: "^(-?(180(\\.0{0,2})?|((1[0-7]\\d)|([1-9]?\\d))?(\\.\\d{0,2})?))?$",
    UI_PALETTE_CLIPS_WAYPOINT_NAME: ".{0,20}"
}
// put default values in here
// saved directly

function getCurTimeScaleVal(v) {
    return (3.5 ** (v - 1));
}

export let _GAMEDATA_DEFAULT = {
    UI_NAME: "little guys",
    UI_MAIN_NEWWORLD_NAME: "little guys",
    UI_MAIN_NEWWORLD_TYPE_SELECT: UI_MAIN_NEWWORLD_TYPE_PLANTS,
    UI_CAMERA_EXPOSURE: 1,
    UI_MAIN_NEWWORLD_SIMHEIGHT: 125,
    UI_MAIN_NEWWORLD_LATITUDE: "42.04", 
    UI_MAIN_NEWWORLD_LONGITUDE: "-87.78",
    UI_GAME_MAX_CANVAS_SQUARES_X: 2000,
    UI_GAME_MAX_CANVAS_SQUARES_Y: 2000, 
    UI_CANVAS_VIEWPORT_CENTER_X: 0,
    UI_CANVAS_VIEWPORT_CENTER_Y: 0,
    UI_CANVAS_VIEWPORT_CENTER_Z: -10,
    UI_CANVAS_VIEWPORT_FRAC_X: 0,
    UI_CANVAS_VIEWPORT_FRAC_Y: 0,
    UI_TEXTEDIT_ACTIVE: null,
    UI_PALETTE_SIZE: 6,
    UI_PALETTE_STRENGTH: 1,
    UI_PALETTE_SELECT: UI_PALETTE_SOILROCK,
    UI_PALETTE_COMPOSITION: [.40, .40, .20],
    UI_PALETTE_VARIANCE: 0.3,
    UI_SOIL_VIEWMODE: "ðŸŽ¨",
    UI_SOIL_INITALWATER: -2,

    UI_LIGHTING_ENABLED: true,

    // lighting
    
    // brightness
    UI_LIGHTING_SUN: .27,
    UI_LIGHTING_MOON: -.979,
    UI_LIGHTING_GLOBAL: 712,
    UI_LIGHTING_DISABLED_BRIGHTNESS: .54,
    UI_LIGHTING_FLATLIGHTING_BRIGHTNESS: -4.979166666666667,
    UI_LIGHTING_FLATLIGHTING_HUE: 125,
    UI_LIGHTING_FLATLIGHTING_SATURATION: .95,
    // decay
    UI_LIGHTING_DECAY: 0.9,
    UI_LIGHTING_WATER: 5.25,
    UI_LIGHTING_ROCK: -.42,
    UI_LIGHTING_PLANT: 4.5,
    // water
    UI_LIGHTING_WATER_OPACITY: 0.4603174603174603,
    UI_LIGHTING_WATER_VALUE: 0.3055555555555556,
    UI_LIGHTING_WATER_SATURATION: 0.49007936507936506,
    UI_LIGHTING_WATER_HUE: 0.023809523809523836,
    // plant
    UI_LIGHTING_PLANT_GRASS: 1,
    UI_LIGHTING_PLANT_TREE: 0,
    
    // end lighting 

    UI_LIGHTING_SHADOW_SOFTNESS: 0.05,
    
    UI_VIEWMODE_SELECT: UI_VIEWMODE_3D,
    UI_TOPBAR: true,
    UI_SPEED: UI_SPEED_1,
    UI_CLIMATE_SELECT: UI_CLIMATE_MIDWEST,
    UI_SIMULATION_HEIGHT: 125,
    UI_LIGHTING_SURFACE: 0.7,
    UI_LIGHTING_UPDATERATE: 1,
    UI_LIGHTING_QUALITY: 7,
    UI_GODMODE_STRENGTH: 0.5,
    UI_TOPBAR_BLOCK: false,
    UI_SM_GODMODE: false,
    UI_CLIMATE_RAINFALL_DENSITY: 2,
    UI_CLIMATE_WEATHER_TOOL_STRENGTH: 0.01,
    UI_CLIMATE_TOOL_SIZE: 20,
    UI_PALETTE_SOILIDX: 3,
    UI_PALETTE_ROCKIDX: 0,
    UI_SIMULATION_CLOUDS: false,
    UI_SIMULATION_GENS_PER_DAY: getCurTimeScaleVal(9),
    UI_CLIMATE_WEATHER_DURATION: 10 ** 8,
    UI_CLIMATE_WEATHER_ACTIVE: UI_CLIMATE_WEATHER_CLEAR,

    UI_CANVAS_SQUARES_ZOOM: 1,
    UI_PALETTE_MODE: UI_PALETTE_MODE_SOIL,
    UI_PALETTE_AQUIFER_FLOWRATE: 0.5,
    UI_ORGANISM_CONFIGURATOR: {},
    UI_ORGANISM_NUTRITION_CONFIGURATOR_DATA: {},
    UI_PALETTE_CLIPS_WAYPOINT_NAME: "new waypoint",
    UI_PALETTE_CLIPS_WAYPOINT_SELECT: -1,
    UI_PALETTE_CLIPS_WAYPOINT_DATAMAP: {},
    UI_PALETTE_PHYSICS: UI_PALETTE_PHYSICS_STATIC,
    UI_PALETTE_PASTE_MODE: UI_PALETTE_PASTE_MODE_FG,

    UI_CLIMATE_WEATHER_TOOL_CLOUD_HUMIDITY: 1.01,
    UI_PALETTE_SPECIAL_CHURN_STRENGTH: 5,
    UI_CLIMATE_WEATHER_RAIN_TOGGLE: false,
    UI_WORLDPAN: true,
    UI_PLANT_CONEFLOWER_HUESHIFT: 0,
    UI_PLANT_CONEFLOWER_PEDALANGLESHIFT: 0,
    UI_LIGHTING_CLOUDCOVER_OPACITY: 1,
    UI_CLIMATE_WEATHER_TOOL_SELECT: UI_CLIMATE_WEATHER_TOOL_DRYAIR,

    UI_STARMAP_ASC: 0,
    UI_STARMAP_XROTATION: 0,
    UI_STARMAP_YROTATION: 0,
    UI_STARMAP_ZROTATION: 0,
    UI_STARMAP_XROTATION_SPEED: 0,
    UI_STARMAP_YROTATION_SPEED: 0,
    UI_STARMAP_ZROTATION_SPEED: 0,

    UI_CAMERA_FOV: 95,
    UI_CAMERA_OFFSET_VEC: [0, 0, 0, 1],
    UI_CAMERA_OFFSET_VEC_DT: [0, 0, 0, 0],
    UI_CAMERA_ROTATION_VEC: [0, 0, 0, 0],
    UI_CAMERA_ROTATION_VEC_DT: [0, 0, 0, 0],
    UI_STARMAP_ROTATION_VEC: [
        randRange(-.4, .4), 
        randRange(-.4, .4), 
        randRange(-.4, .4), 0],
    UI_STARMAP_ROTATION_VEC_DT: [0, 0, 0, 0],
    UI_STARMAP_NORMAL_BRIGTNESS: 1,
    UI_STARMAP_CONSTELATION_BRIGHTNESS: 0,
    UI_STARMAP_STAR_MAX_SIZE: 4,
    UI_STARMAP_STAR_SIZE_FACTOR: .04035,
    UI_STARMAP_STAR_OPACITY_FACTOR: 0.3851922,
    UI_STARMAP_STAR_OPACITY_SHIFT: 2.24128,
    UI_STARMAP_BRIGHTNESS_SHIFT: -.436743,
    UI_STARMAP_ZOOM: 10,
    UI_STARMAP_PREV_ZOOM: 10,
    UI_STARMAP_STAR_CONTROL_TOGGLE_MODE: 0
};

export let _UI_DEFAULT = {
    UI_UI_SIZE: 12,
    UI_UI_NEXTWORLD: 0,
    UI_UI_CURWORLD: 1,
    UI_UI_WORLDHIDDEN: {},
    UI_UI_WORLDDELETED: {},
    UI_UI_WORLDNAME: {},
    UI_UI_LASTSAVED: Date.now(),
    UI_UI_WORLDPAGE: 0,
    UI_PALETTE_SPECIAL_SHOWINDICATOR: true,
    UI_CLIPS: [],
    UI_CLIPS_DENSITY: 2,
    UI_CLIPS_PAGE: 0
}

export const GAMEDATA = "GAMEDATA";
export const UICONFIG = "UICONFIG";

let ROOT = {
    GAMEDATA: structuredClone(_GAMEDATA_DEFAULT),
    UICONFIG: structuredClone(_UI_DEFAULT)
}

export function getGAMEDATA() {
    return ROOT[GAMEDATA];
}
export function setGAMEDATA(inVal) {
    ROOT[GAMEDATA] = inVal;

    Object.keys(_GAMEDATA_DEFAULT).forEach((key) => {
        if (ROOT[GAMEDATA][key] != null)
            return;
        ROOT[GAMEDATA][key] = _GAMEDATA_DEFAULT[key];
    })
}

export function getUICONFIG() {
    return ROOT[UICONFIG];
}
export function setUICONFIG(inVal) {
    ROOT[UICONFIG] = inVal;
    Object.keys(_UI_DEFAULT).forEach((key) => {
        if (ROOT[UICONFIG][key] != null)
            return;
        ROOT[UICONFIG][key] = _UI_DEFAULT[key];
    })
}

let UI_FUNCTION_MAP = new Map();

let UI_SINGLE_GROUPS = [
    [UI_SM_BB, UI_PALETTE_BLOCKS, UI_SM_LIGHTING, UI_PALETTE_PLANTS, UI_SM_GODMODE, UI_SM_CLIMATE, UI_CLIMATE_SELECT_CLOUDS],
    [UI_TOPBAR_MAINMENU, UI_TOPBAR_BLOCK, UI_TOPBAR_VIEWMODE, UI_TOPBAR_LIGHTING, UI_TOPBAR_SIMULATION, UI_TOPBAR_WEATHER, UI_TOPBAR_TIME],
    [UI_TOPBAR_BLOCK, UI_TOPBAR_MAINMENU],
    [UI_PALETTE_PLANTS, UI_TOPBAR_SIMULATION],
    [UI_CLIMATE_SELECT_MENU, UI_CLIMATE_SELECT_CLOUDS, UI_TOPBAR_WEATHER],
]

let UI_AUTOCLOSE = {
    UI_TOPBAR_BLOCK: {GAMEDATA: [UI_PALETTE_BLOCKS, UI_PALETTE_PLANTS]}
}

let UI_NEWWORLD_ALLOWLIST = [
    UI_TEXTEDIT_ACTIVE, 
    UI_MAIN_NEWWORLD, 
    UI_MAIN_NEWWORLD_LATITUDE, 
    UI_MAIN_NEWWORLD_LONGITUDE, 
    UI_MAIN_NEWWORLD_NAME, 
    UI_MAIN_NEWWORLD_TYPE_SELECT, 
    UI_MAIN_NEWWORLD_SIMHEIGHT, 
    UI_CAMERA_EXPOSURE, 
    UI_CLIMATE_RAINFALL_DENSITY, 
    UI_CAMERA_OFFSET_VEC,
    UI_CAMERA_OFFSET_VEC_DT,
    UI_CAMERA_ROTATION_VEC,
    UI_CAMERA_ROTATION_VEC_DT,
    UI_CAMERA_FOV,
    UI_STARMAP_ROTATION_VEC,
    UI_STARMAP_ROTATION_VEC_DT,
]

let queuedFunctionArr = new Array();

export function addUIFunctionMap(key, value) {
    UI_FUNCTION_MAP[key] = value;
}

export function saveGD(key, value) {
    return saveGeneral(ROOT[GAMEDATA], key, value);
}

export function saveUI(key, value) {
    return saveGeneral(ROOT[UICONFIG], key, value);
}

export function loadGD(key) {
    return ROOT[GAMEDATA][key];
}

export function saveGDMap(map) {
    _GAMEDATA = map;
}

export function loadUI(key) {
    return ROOT[UICONFIG][key];
}

export function getMapEntry(map, key) {
    return ROOT[map][key]
}
export function saveMapEntry(map, key, value) {
    saveGeneral(ROOT[map], key, value);
}

function saveGeneral(map, key, value) {
    let singleGroup = (UI_SINGLE_GROUPS.find((group) => group.indexOf(key) > -1));
    if (singleGroup != null) {
        singleGroup.filter((k) => loadGD(k)).forEach((k) => {
            ROOT[GAMEDATA][k] = false;
            if (k in UI_AUTOCLOSE) {
                UI_AUTOCLOSE[k][GAMEDATA].forEach((key2) => saveGD(key2, false));
            }
        });
    }
    if (key in UI_AUTOCLOSE)
        Object.keys(UI_AUTOCLOSE[key]).forEach((key2) => UI_AUTOCLOSE[key][key2].forEach((key3) => saveGeneral(ROOT[key2], key3, false)));


    // if (key != UI_CAMERA_EXPOSURE && key != UI_TEXTEDIT_ACTIVE && !(Object.keys(UI_REGEX).some((k) => k == key)))
        // console.log("doing nothing");
        // saveGD(UI_TEXTEDIT_ACTIVE, null);
    
    map[key] = value;
    if (key in UI_FUNCTION_MAP) {
        queuedFunctionArr.push(UI_FUNCTION_MAP[key]);
    }
    if (!value && key in UI_AUTOCLOSE) {
        Object.keys(UI_AUTOCLOSE[key]).forEach((key2) => saveGD(key2, false));
    }
    if (!(UI_NEWWORLD_ALLOWLIST.some((k) => key == k))) {
        saveGD(UI_MAIN_NEWWORLD, false);
        saveGD(UI_TEXTEDIT_ACTIVE, null)
    }
    if (map == ROOT[UICONFIG]) {
        saveUserSettings();
    }
    return value;
}



export function executeFunctionQueue() {
    if (queuedFunctionArr.length != 0) {
        queuedFunctionArr.forEach((f) => f());
        queuedFunctionArr = new Array();
    }
}

export function closeEyedropperMixer() {
    saveGD(UI_PALETTE_SELECT, UI_PALETTE_SOILROCK);
}